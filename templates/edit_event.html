{% extends "base.html" %}

{% block title %}Edit Event{% endblock %}

{% block head %}
<link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
{% endblock %}

{% block content %}
<h2>Edit Event</h2>
<form method="POST">
    {{ form.hidden_tag() }}
    <div class="form-group">
        {{ form.title.label(class="form-control-label") }}
        {{ form.title(class="form-control") }}
    </div>
    <div class="form-group">
        {{ form.start.label(class="form-control-label") }}
        {{ form.start(class="form-control", id="start-picker") }}
    </div>
    <div class="form-group">
        {{ form.end.label(class="form-control-label") }}
        {{ form.end(class="form-control", id="end-picker") }}
    </div>
    <div class="form-group">
        {{ form.submit(class="btn btn-primary") }}
    </div>
</form>
<form method="POST" action="{{ url_for('delete_event', event_id=event.id) }}" onsubmit="return confirm('Are you sure you want to delete this event?');">
    <button type="submit" class="btn btn-danger">Delete Event</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        flatpickr("#start-picker", {
            enableTime: true,
            dateFormat: "Y-m-d H:i:S",
            defaultDate: "{{ form.start.data.strftime('%Y-%m-%d %H:%M:%S') }}"
        });
        flatpickr("#end-picker", {
            enableTime: true,
            dateFormat: "Y-m-d H:i:S",
            defaultDate: "{{ form.end.data.strftime('%Y-%m-%d %H:%M:%S') }}"
        });
    });
</script>
{% endblock %}
