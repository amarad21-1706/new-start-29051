{% extends "base.html" %}

{% block content %}
<h2>Chart Configurations</h2>

<!-- Flash message display -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <div class="alert-container">
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}

<a href="{{ url_for('charts.add_chart') }}" class="btn btn-primary">Add New Chart</a>

<table class="table">
    <thead>
        <tr>
            <th>Chart Name</th>
            <th>Chart Type</th>
            <th>Company</th>
            <th>Area</th>
            <th>Subarea</th>
            <th>Year</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for chart in charts %}
        <tr>
            <td>{{ chart.chart_name }}</td>
            <td>{{ chart.chart_type }}</td>
            <td>{{ chart.company_id or 'N/A' }}</td>
            <td>{{ chart.area_id }}</td>
            <td>{{ chart.subarea_id }}</td>
            <td>{{ chart.fi0 }}</td>
            <td>
                <a href="{{ url_for('charts.view_chart', chart_id=chart.id) }}" class="btn btn-success">View</a>
                <a href="{{ url_for('charts.edit_chart', chart_id=chart.id) }}" class="btn btn-info">Edit</a>
                <form action="{{ url_for('charts.delete_chart', id=chart.id) }}" method="POST" style="display:inline;" onsubmit="return confirmDelete();">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    // JavaScript function to confirm the deletion action
    function confirmDelete() {
        return confirm('Are you sure you want to delete this chart configuration? This action cannot be undone.');
    }
</script>

<style>
  /* Ensure the background is dark */
  body {
      background-color: #121212;  /* Dark background */
      color: #ffffff;  /* White text */
  }

  /* Table styling */
  table {
      width: 100%;
      border-collapse: collapse;
  }

  th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
  }

  th {
      background-color: #333333;  /* Darker background for headers */
      color: #ffffff;  /* White text for headers */
  }

  td {
      background-color: #1a1a1a;  /* Slightly lighter background for rows */
      color: #ffffff;  /* White text for table cells */
  }

  /* Buttons */
  .btn {
      color: #ffffff;
      background-color: #0066cc; /* Blue button background */
      padding: 8px 12px;
      border: none;
      cursor: pointer;
      text-decoration: none;
      font-size: 14px;
      border-radius: 4px;
  }

  .btn:hover {
      background-color: #005bb5;  /* Darker blue on hover */
  }

  /* Style for Delete confirmation */
  .btn-danger {
      background-color: #cc0000;  /* Red button background */
  }

  .btn-danger:hover {
      background-color: #b30000;  /* Darker red on hover */
  }

  /* General styling */
  h2 {
      color: #ffffff;  /* Ensure the title is white */
  }

  .form-group label {
      color: #ffffff;  /* White labels in forms */
  }

  .form-control {
      background-color: #1a1a1a;  /* Dark input background */
      color: #ffffff;  /* White input text */
      border: 1px solid #444444;  /* Border for inputs */
  }
</style>


{% endblock %}
